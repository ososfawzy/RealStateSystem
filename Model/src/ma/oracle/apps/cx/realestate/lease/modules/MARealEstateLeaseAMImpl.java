package ma.oracle.apps.cx.realestate.lease.modules;

import java.util.Locale;
import java.util.Map;

import javax.faces.context.FacesContext;

import ma.oracle.apps.cx.realestate.lease.modules.common.MARealEstateLeaseAM;
import ma.oracle.apps.cx.realestate.lease.views.MARSLeaseChargesVOImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARSLeasePaymentsVOImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARSLeasePropertyVOImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARSOppLeasePropertyVOImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARSUpdateLeasePropertyVOImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARSUpdateLeasePropertyVORowImpl;
import ma.oracle.apps.cx.realestate.lease.views.MARealEstateleaseVOImpl;


import oracle.adf.share.ADFContext;

import oracle.jbo.Row;
import oracle.jbo.ViewObject;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewLinkImpl;

import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Sun May 06 12:18:01 EEST 2018
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class MARealEstateLeaseAMImpl extends ApplicationModuleImpl implements MARealEstateLeaseAM {
    /**
     * This is the default constructor (do not remove).
     */
    public MARealEstateLeaseAMImpl() {
    }

    public Number createLeasePropertyRow(Number propertyId) {
        ViewObject leasePropertyVO = this.getMARSLeasePropertyVO();
        Row leasePropertyRow = leasePropertyVO.createRow();
        leasePropertyRow.setAttribute("PropertyId", propertyId);
        leasePropertyVO.insertRow(leasePropertyRow);

        return (Number)leasePropertyVO.getCurrentRow().getAttribute("LeaseId");
    }


    public void createOppLeasePropertyRow(Number propertyId,
                                          Number opportunityId) {
        ViewObject leasePropertyVO = this.getMARSOppLeasePropertyVO();
        Row leasePropertyRow = leasePropertyVO.createRow();
        leasePropertyRow.setAttribute("PropertyId", propertyId);
        leasePropertyRow.setAttribute("OpportunityId", opportunityId);
        leasePropertyVO.insertRow(leasePropertyRow);
    }

    public void initLeaseQuery(Number leaseId) {
        ViewObject leaseVO = this.getMARealEstateleaseVO();
        leaseVO.setWhereClauseParams(null);
        leaseVO.setWhereClause("LEASE_ID=:1");
        leaseVO.setWhereClauseParam(0, leaseId);
        leaseVO.executeQuery();
    }

    public void initOppLeasePropertyQuery(Number opportunityId) {
        ViewObject oppLeasePropVO = this.getMARSOppLeasePropertyVO();
        oppLeasePropVO.setWhereClauseParams(null);
        oppLeasePropVO.setWhereClause("OPPORTUNITY_ID=:1");
        oppLeasePropVO.setWhereClauseParam(0, opportunityId);
        oppLeasePropVO.executeQuery();
    }

    public Number createLeaseFromOpportunity(Number opportunityId , String leaseSubject) {
        this.getDBTransaction().commit();

        ViewObject leaseVO = this.getMARealEstateleaseVO();
        Row leaseRow = leaseVO.createRow();
        leaseRow.setAttribute("Subject", leaseSubject);
        leaseVO.insertRow(leaseRow);

        ViewObject leasePropertyVO = this.getMARSUpdateLeasePropertyVO();
        leasePropertyVO.setWhereClauseParams(null);
        leasePropertyVO.setWhereClause("OPPORTUNITY_ID=:1");
        leasePropertyVO.setWhereClauseParam(0, opportunityId);
        leasePropertyVO.executeQuery();

        while (leasePropertyVO.hasNext()) {
            MARSUpdateLeasePropertyVORowImpl leasePropRow =
                (MARSUpdateLeasePropertyVORowImpl)leasePropertyVO.next();
            leasePropRow.setLeaseId((Number)leaseVO.getCurrentRow().getAttribute("LeaseId"));
        }

        this.getDBTransaction().commit();

        return (Number)leaseVO.getCurrentRow().getAttribute("LeaseId");
    }


    /**
     * Container's getter for MABillingFrequencyVVO1.
     * @return MABillingFrequencyVVO1
     */
    public ViewObjectImpl getMABillingFrequencyVVO() {
        return (ViewObjectImpl)findViewObject("MABillingFrequencyVVO");
    }

    /**
     * Container's getter for MAChargesTypeVVO1.
     * @return MAChargesTypeVVO1
     */
    public ViewObjectImpl getMAChargesTypeVVO() {
        return (ViewObjectImpl)findViewObject("MAChargesTypeVVO");
    }

    /**
     * Container's getter for MACustomerResponseVVO1.
     * @return MACustomerResponseVVO1
     */
    public ViewObjectImpl getMACustomerResponseVVO() {
        return (ViewObjectImpl)findViewObject("MACustomerResponseVVO");
    }

    /**
     * Container's getter for MALeaseSearchVVO1.
     * @return MALeaseSearchVVO1
     */
    public ViewObjectImpl getMALeaseSearchVVO() {
        return (ViewObjectImpl)findViewObject("MALeaseSearchVVO");
    }

    /**
     * Container's getter for MALeaseStatusVVO1.
     * @return MALeaseStatusVVO1
     */
    public ViewObjectImpl getMALeaseStatusVVO() {
        return (ViewObjectImpl)findViewObject("MALeaseStatusVVO");
    }

    /**
     * Container's getter for MALeaseTypeVVO1.
     * @return MALeaseTypeVVO1
     */
    public ViewObjectImpl getMALeaseTypeVVO() {
        return (ViewObjectImpl)findViewObject("MALeaseTypeVVO");
    }

    /**
     * Container's getter for MAOpportunitiesVVO1.
     * @return MAOpportunitiesVVO1
     */
    public ViewObjectImpl getMAOpportunitiesVVO() {
        return (ViewObjectImpl)findViewObject("MAOpportunitiesVVO");
    }

    /**
     * Container's getter for MAParentLeaseVVO1.
     * @return MAParentLeaseVVO1
     */
    public ViewObjectImpl getMAParentLeaseVVO() {
        return (ViewObjectImpl)findViewObject("MAParentLeaseVVO");
    }

    /**
     * Container's getter for MAPaymentStatusVVO1.
     * @return MAPaymentStatusVVO1
     */
    public ViewObjectImpl getMAPaymentStatusVVO() {
        return (ViewObjectImpl)findViewObject("MAPaymentStatusVVO");
    }

    /**
     * Container's getter for MAPaymentTypesVVO1.
     * @return MAPaymentTypesVVO1
     */
    public ViewObjectImpl getMAPaymentTypesVVO() {
        return (ViewObjectImpl)findViewObject("MAPaymentTypesVVO");
    }

    /**
     * Container's getter for MARealEstateleaseVO1.
     * @return MARealEstateleaseVO1
     */
    public MARealEstateleaseVOImpl getMARealEstateleaseVO() {
        return (MARealEstateleaseVOImpl)findViewObject("MARealEstateleaseVO");
    }

    /**
     * Container's getter for MARefundTypeVVO1.
     * @return MARefundTypeVVO1
     */
    public ViewObjectImpl getMARefundTypeVVO() {
        return (ViewObjectImpl)findViewObject("MARefundTypeVVO");
    }

    /**
     * Container's getter for MARemitToBankVVO1.
     * @return MARemitToBankVVO1
     */
    public ViewObjectImpl getMARemitToBankVVO() {
        return (ViewObjectImpl)findViewObject("MARemitToBankVVO");
    }

    /**
     * Container's getter for MARenewedContractHistoryVVO1.
     * @return MARenewedContractHistoryVVO1
     */
    public ViewObjectImpl getMARenewedContractHistoryVVO() {
        return (ViewObjectImpl)findViewObject("MARenewedContractHistoryVVO");
    }


    /**
     * Container's getter for MATerminationReasonVVO1.
     * @return MATerminationReasonVVO1
     */
    public ViewObjectImpl getMATerminationReasonVVO() {
        return (ViewObjectImpl)findViewObject("MATerminationReasonVVO");
    }


    /**
     * Container's getter for MARealEstateCurrencies1.
     * @return MARealEstateCurrencies1
     */
    public ViewObjectImpl getMARealEstateCurrencies() {
        return (ViewObjectImpl)findViewObject("MARealEstateCurrencies");
    }


    /**
     * Container's getter for MAPropertyChildTypeVO.
     * @return MAPropertyChildTypeVO
     */
    public ViewObjectImpl getMAPropertyChildTypeVO() {
        return (ViewObjectImpl)findViewObject("MAPropertyChildTypeVO");
    }

    /**
     * Container's getter for MAPropertyParentTypeVO.
     * @return MAPropertyParentTypeVO
     */
    public ViewObjectImpl getMAPropertyParentTypeVO() {
        return (ViewObjectImpl)findViewObject("MAPropertyParentTypeVO");
    }


    /**
     * Container's getter for MARSLeaseChargesVO1.
     * @return MARSLeaseChargesVO1
     */
    public MARSLeaseChargesVOImpl getMARSLeaseChargesVO() {
        return (MARSLeaseChargesVOImpl)findViewObject("MARSLeaseChargesVO");
    }

    /**
     * Container's getter for MALeaseToChargesVL1.
     * @return MALeaseToChargesVL1
     */
    public ViewLinkImpl getMALeaseToChargesVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToChargesVL1");
    }

    /**
     * Container's getter for MARSLeasePaymentsVO1.
     * @return MARSLeasePaymentsVO1
     */
    public MARSLeasePaymentsVOImpl getMARSLeasePaymentsVO() {
        return (MARSLeasePaymentsVOImpl)findViewObject("MARSLeasePaymentsVO");
    }

    /**
     * Container's getter for MALeaseToPaymentsVL1.
     * @return MALeaseToPaymentsVL1
     */
    public ViewLinkImpl getMALeaseToPaymentsVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToPaymentsVL1");
    }

    /**
     * Container's getter for MARealEstateLeaseVVO1.
     * @return MARealEstateLeaseVVO1
     */
    public ViewObjectImpl getMARealEstateLeaseVVO() {
        return (ViewObjectImpl)findViewObject("MARealEstateLeaseVVO");
    }


    /**
     * Container's getter for MARSPropertySearchVO1.
     * @return MARSPropertySearchVO1
     */
    public ViewObjectImpl getMARSPropertySearchVO() {
        return (ViewObjectImpl)findViewObject("MARSPropertySearchVO");
    }


    /**
     * Container's getter for MALeaseSearchToLeaseVL1.
     * @return MALeaseSearchToLeaseVL1
     */
    public ViewLinkImpl getMALeaseSearchToLeaseVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseSearchToLeaseVL1");
    }


    /**
     * Container's getter for MARSLeasePropertyVO1.
     * @return MARSLeasePropertyVO1
     */
    public MARSLeasePropertyVOImpl getMARSLeasePropertyVO() {
        return (MARSLeasePropertyVOImpl)findViewObject("MARSLeasePropertyVO");
    }

    /**
     * Container's getter for MALeaseToLeasePropertyVL1.
     * @return MALeaseToLeasePropertyVL1
     */
    public ViewLinkImpl getMALeaseToLeasePropertyVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToLeasePropertyVL1");
    }

    /**
     * Container's getter for MARealEstatePropertyVVO1.
     * @return MARealEstatePropertyVVO1
     */
    public ViewObjectImpl getMARealEstatePropertyVVO() {
        return (ViewObjectImpl)findViewObject("MARealEstatePropertyVVO");
    }

    /**
     * Container's getter for MARSLeaseChargesVVO1.
     * @return MARSLeaseChargesVVO1
     */
    public ViewObjectImpl getMARSLeaseChargesVVO() {
        return (ViewObjectImpl)findViewObject("MARSLeaseChargesVVO");
    }


    /**
     * Container's getter for MARSLeasePropertiesChargesLOVVVO1.
     * @return MARSLeasePropertiesChargesLOVVVO1
     */
    public ViewObjectImpl getMARSLeasePropertiesChargesLOVVVO() {
        return (ViewObjectImpl)findViewObject("MARSLeasePropertiesChargesLOVVVO");
    }


    /**
     * Container's getter for MARSParentLeasePopupVO1.
     * @return MARSParentLeasePopupVO1
     */
    public ViewObjectImpl getMARSParentLeasePopupVO() {
        return (ViewObjectImpl)findViewObject("MARSParentLeasePopupVO");
    }

    /**
     * Container's getter for MALeaseToParentLeasePopupVL1.
     * @return MALeaseToParentLeasePopupVL1
     */
    public ViewLinkImpl getMALeaseToParentLeasePopupVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToParentLeasePopupVL1");
    }

    /**
     * Container's getter for MARSOppLeasePropertyVO1.
     * @return MARSOppLeasePropertyVO1
     */
    public MARSOppLeasePropertyVOImpl getMARSOppLeasePropertyVO() {
        return (MARSOppLeasePropertyVOImpl)findViewObject("MARSOppLeasePropertyVO");
    }

    /**
     * Container's getter for MAContactPersonPopupVO1.
     * @return MAContactPersonPopupVO1
     */
    public ViewObjectImpl getMAContactPersonPopupVO() {
        return (ViewObjectImpl)findViewObject("MAContactPersonPopupVO");
    }

    /**
     * Container's getter for MALeaseToContactPersonPopupVL1.
     * @return MALeaseToContactPersonPopupVL1
     */
    public ViewLinkImpl getMALeaseToContactPersonPopupVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToContactPersonPopupVL1");
    }

    /**
     * Container's getter for MALeaserInfoPopupVO1.
     * @return MALeaserInfoPopupVO1
     */
    public ViewObjectImpl getMALeaserInfoPopupVO() {
        return (ViewObjectImpl)findViewObject("MALeaserInfoPopupVO");
    }

    /**
     * Container's getter for MALeaseToLeaserInfoPopupVL1.
     * @return MALeaseToLeaserInfoPopupVL1
     */
    public ViewLinkImpl getMALeaseToLeaserInfoPopupVL1() {
        return (ViewLinkImpl)findViewLink("MALeaseToLeaserInfoPopupVL1");
    }

    /**
     * Container's getter for MARSUpdateLeasePropertyVO1.
     * @return MARSUpdateLeasePropertyVO1
     */
    public MARSUpdateLeasePropertyVOImpl getMARSUpdateLeasePropertyVO() {
        return (MARSUpdateLeasePropertyVOImpl)findViewObject("MARSUpdateLeasePropertyVO");
    }
    
    public void chang_lang(String lang) {
       Locale newLocale = new Locale(lang);
       FacesContext context = FacesContext.getCurrentInstance();
       context.getViewRoot().setLocale(newLocale);
    }
    
    public void ar_lang() {
        chang_lang("ar");    
        Map sessionScope = ADFContext.getCurrent().getSessionScope();
        sessionScope.put("session", "ar");
    }
    
    public void en_lang() {
        chang_lang("en");
        Map sessionScope = ADFContext.getCurrent().getSessionScope();
        sessionScope.put("session", "en");
    }
    
    public void set_lang() {
        Map sessionScope = ADFContext.getCurrent().getSessionScope();
        Locale newLocale;
        String lang = sessionScope.get("session").toString();
        newLocale = new Locale(lang);
        FacesContext context = FacesContext.getCurrentInstance();
        context.getViewRoot().setLocale(newLocale);    
    }
}
